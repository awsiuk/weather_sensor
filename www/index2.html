<!DOCTYPE html>
<head>
<meta charset="UTF-8">
</head>
<body>
<div><h1>Weather station</h1></div>
<div><p><b>Hostname:</b> {0}</p></div>
<div>
<table>
<tr><td>Temperature:</td><td><dane1 id="dane_temp"></dane1> C</td></tr>
<tr><td>Humidity:</td><td><dane2 id="dane_hum"></dane2> %</td></tr>
<tr><td>Air Quality Index (AQI):</td><td><dane3 id="dane_AQI"></dane3></td></tr>
<tr><td>TVOC:</td><td><dane4 id="dane_TVOC"></dane4> mg/m3</td></tr>
<tr><td>eCO2:</td><td><dane5  id="dane_eCO2"></dane5> ppm</td></tr>
<tr><td>Illuminance:</td><td><dane6 id="dane_lux"></dane6> lux</td></tr>
</table>
</div>

<div>
<a href="https://la-tech.pl"><img src="logo.png"></a>
</div>
<table>
<tr>
<td><a href="">configuration</a></td>
<td><a href="/api">api</a></td>
</tr>
</table>
<script>
async function get_data() {
    const res = await fetch('/api');
    const jdata = await res.json();
    return jdata;
    }

async function updateData() {
    const jdata = await get_data();
    if (jdata) {
	console.log(jdata);
	document.getElementById("dane_temp").innerHTML = jdata.temp;
	document.getElementById("dane_hum").innerHTML = jdata.hum;
	document.getElementById("dane_AQI").innerHTML = jdata.AQI;
	document.getElementById("dane_TVOC").innerHTML = jdata.TVOC;
	document.getElementById("dane_eCO2").innerHTML = jdata.eCO2;
	document.getElementById("dane_lux").innerHTML = jdata.lux;
        }
    else {
	console.log(jdata);
	}
    }
document.addEventListener("DOMContentLoaded", () => {
    updateData();
});
</script>

</body>
</html>
